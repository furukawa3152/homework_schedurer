# 宿題進捗管理アプリ

## 概要
- Streamlitとgspreadを使い、Googleスプレッドシートをデータベースとして二人の子供（そら・こころ）の宿題進捗を管理するアプリです。
- 進捗は0〜10の数字で管理し、達成率や未達成の宿題が一目で分かるグラフ・リスト表示機能付き。
- 2025年夏休みの宿題管理を想定。

## 主な機能
- 宿題の追加・進捗更新・メモ管理
- 子供ごとにタブで分けて管理
- 達成率の自動計算・棒グラフ表示（Y軸0〜10、色分け）
- 未達成宿題のリストアップ
- Googleスプレッドシート連携
- OpenAI API（gpt-4.1-mini）を使った「パイル先生」褒め機能
- 本日日付・夏休み残り日数の表示

## セットアップ
1. `requirements.txt`の内容で必要なパッケージをインストール
2. Googleサービスアカウント認証JSONを取得し、`.streamlit/secrets.toml`またはCloudのSecretsに設定
3. スプレッドシートの共有設定でサービスアカウントのメールアドレスに編集権限を付与
4. `streamlit run app.py` で起動

## 特徴
- 子供向けにやさしい表現・レイアウト
- 進捗に応じて棒グラフの色が変化（赤・オレンジ・緑）
- 進捗更新や追加時に画面が自動リロード
- 認証情報は安全に管理（Gitには上げない）
- OpenAI APIキーを入力することで、各タブで「パイル先生ボタン」を押すと、その子の進捗状況をもとにChatGPTが厳しくもやさしく励ましてくれる

## 最新アップデート（2025年7月26日）
- 「パイル先生」機能追加（gpt-4.1-mini対応、プロンプト改善、ボタン名変更）
- UI・表現の子供向け最適化
- グラフのY軸・色分け・メモリ表示改善
- 日付・カウントダウン・自動リロード機能追加

### パイル先生機能の詳細
- **2つのモード**：
  - 「パイル先生（やさしいモード）」：やさしく励ます
  - 「パイル先生（おこってるモード）」：厳しい口調で叱咤激励
- **プロンプト例**：
  - やさしいモード：「なかなか頑張っているじゃないか！」「いいぞ、その調子だ」
  - おこってるモード：「もっと本気を出せ！」「だらだらしていると間に合わないぞ！」
- **UI改善**：各タブに2つのボタンを横並びで配置、色分け表示

### イベント連携機能
- **「days」シート連携**：A列に日付、B列にイベントトピックが記載された「days」シートを読み込み
- **自動イベント取得**：パイル先生ボタン起動時に同日のイベントを自動取得
- **プロンプト拡張**：本日のイベント情報を「【本日のイベント】」として追加
- **動作例**：
  - 「今日はプールに行く」→「プールに行く前に宿題を終わらせなさい！」
  - 「おばあちゃんの家に行く」→「おばあちゃんに会う前に宿題を頑張りなさい！」
- **より個性的でリアルタイムなコメント**が可能

---

ご質問・ご要望はIssueまたはコメントでどうぞ！
